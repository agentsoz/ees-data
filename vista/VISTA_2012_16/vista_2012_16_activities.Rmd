---
title: "VISTA 2012-16 Activities"
author: "Dhirendra Singh"
output:
  pdf_document: default
  html_document:
    keep_md: no
urlcolor: blue
geometry: "left=1cm,right=1cm,top=2cm,bottom=2cm"
---

# About 
*This document was generated on `r as.character(format(Sys.Date(), format="%B %d, %Y"))`.*

# Input Data


The Victorian Integrated Survey of Travel & Activity (VISTA) 2012-16 data was downloaded from the following URL on 10th May 2019:
```
https://transport.vic.gov.au/-/media/tfv-documents/vista/vista_2012_16_v1_sa1_csv.zip
```

The Zip archive was uncompressed, and the contained CSV files recompressed using GZip giving:
```
./VISTA_2012_16_v1_SA1_CSV/JTW_VISTA12_16_SA1_V1.csv.gz
./VISTA_2012_16_v1_SA1_CSV/S_VISTA12_16_SA1_V1.csv.gz
./VISTA_2012_16_v1_SA1_CSV/H_VISTA12_16_SA1_V1.csv.gz
./VISTA_2012_16_v1_SA1_CSV/P_VISTA12_16_SA1_V1.csv.gz
./VISTA_2012_16_v1_SA1_CSV/JTE_VISTA12_16_sa1_V1.csv.gz
./VISTA_2012_16_v1_SA1_CSV/T_VISTA12_16_SA1_V1.csv.gz
```

# Data Processing

```{r echo=FALSE, eval = FALSE}
source('./vista_2012_16_functions.R')
vista_csv <- './VISTA_2012_16_v1_SA1_CSV/S_VISTA12_16_SA1_V1.csv.gz'
out_weekday_activities_csv_gz <- './vista_2012_16_extracted_activities_weekday.csv.gz'
out_weekend_activities_csv_gz <- './vista_2012_16_extracted_activities_weekend.csv.gz'

# Extract the activities and save separately into weekday and weekend activities
extract_and_write_activities_from(vista_csv, out_weekday_activities_csv_gz, out_weekend_activities_csv_gz)

# Simplify some activitiy classes to activity groups
simplify_activities_and_create_groups(out_weekday_activities_csv_gz)
simplify_activities_and_create_groups(out_weekend_activities_csv_gz)

# Collapse into desired time bin sizes and write out
for (binSizeInMins in c(30,60,120)) {
  out_weekday_activities_tod_csv_gz <- paste0('./vista_2012_16_extracted_activities_weekday_',binSizeInMins,'_min_bins.csv.gz')
  out_weekend_activities_tod_csv_gz <- paste0('./vista_2012_16_extracted_activities_weekend_',binSizeInMins,'_min_bins.csv.gz')
  extract_activities_by_time_of_day(out_weekend_activities_csv_gz, binSizeInMins,out_weekend_activities_tod_csv_gz)
  extract_activities_by_time_of_day(out_weekday_activities_csv_gz, binSizeInMins, out_weekday_activities_tod_csv_gz)
}
```
\newpage
# Weekday activities by time of day for Greater Melbourne

```{r echo=FALSE, fig.width=8, fig.height=3}
source('./vista_2012_16_functions.R')
plot_activities_by_hour_of_day('./vista_2012_16_extracted_activities_weekday_30_min_bins.csv.gz')
```

```{r echo=FALSE, fig.width=8, fig.height=3}
source('./vista_2012_16_functions.R')
plot_activities_by_hour_of_day('./vista_2012_16_extracted_activities_weekday_60_min_bins.csv.gz')
```

```{r echo=FALSE, fig.width=8, fig.height=3}
source('./vista_2012_16_functions.R')
plot_activities_by_hour_of_day('./vista_2012_16_extracted_activities_weekday_120_min_bins.csv.gz')
```

# Weekend activities by time of day for Greater Melbourne

```{r echo=FALSE, fig.width=8, fig.height=3}
source('./vista_2012_16_functions.R')
plot_activities_by_hour_of_day('./vista_2012_16_extracted_activities_weekend_30_min_bins.csv.gz')
```

```{r echo=FALSE, fig.width=8, fig.height=3}
source('./vista_2012_16_functions.R')
plot_activities_by_hour_of_day('./vista_2012_16_extracted_activities_weekend_60_min_bins.csv.gz')
```

```{r echo=FALSE, fig.width=8, fig.height=3}
source('./vista_2012_16_functions.R')
plot_activities_by_hour_of_day('./vista_2012_16_extracted_activities_weekend_120_min_bins.csv.gz')
```
